require.config({baseUrl:"javascripts",waitSeconds:20,paths:{jquery:"lib/jquery.min",imagesLoaded:"lib/imagesloaded.pkgd",async:"lib/async",link:"link"}}),require(["jquery","imagesLoaded"],function(t,a){var e,i,o,s,n,r,l,u,c,m,g;e="4dff88a0423651b3570253b10b745b2c",r="fakelbst",o=10,n=1,l="http://ws.audioscrobbler.com/2.0/?method=user.gettopartists&user={0}&api_key="+e+"&limit="+o+"&format=json",i="http://ws.audioscrobbler.com/2.0/?method=tag.gettopartists&tag={0}&api_key="+e+"&limit="+o+"&format=json",s="http://cdn.last.fm/flatness/catalogue/noimage/2/default_album_medium.png",t("#showLeftPush").click(function(){t(this).toggleClass("active"),t(this).hasClass("active")&&(t(".lastfm-username input").focus(),t("body").css("overflow-x","hidden")),t("body").toggleClass("cbp-spmenu-push-toright"),t("#cbp-spmenu-s1").toggleClass("cbp-spmenu-open")}),t("#get-user").click(function(){var a,e;a=t(".lastfm-username input").val(),e=l.format(a),m(),u(e)}),t("#get-tags").click(function(){var a,e;a=t(".lastfm-tags input").val(),e=i.format(a),m(),u(e)}),t("#play").click(function(){window.mode="normal",u(l.format("fakelbst"))}),t("#easy-mode").click(function(){window.mode="easy",u(l.format("fakelbst"))}),t("#how-to").click(function(){}),t("#select-genres").click(function(){t(".genres").toggle("normal")}),t(".genres a").click(function(){var a,e;a=t(this).attr("d"),e=i.format(a),m(),u(e)}),m=function(){var a,e;return t(".loading, .loading i").show(),t(".loading .infos").text("Loading...please wait."),t(".playground").hide(),t("#image-datas").empty(),a=document.getElementById("c"),e=a.getContext("2d"),e.clearRect(0,0,a.width,a.height)},c=0,g=function(e){10===c&&(a("#image-datas",function(){return t(".loading").fadeOut("slow",function(){t(".playground").fadeIn("slow")}),require(["link"],function(t){return t.init(12,8,e)})}),c=0)},u=function(a){return t.when(t.ajax(a)).then(function(a){var i,o,s,n,r,l;if(a.error)return t(".loading i").hide(),void t(".loading .infos").text(a.message);if(a.topartists["@attr"].total<10)return t(".loading i").hide(),void t(".loading .infos").text("Please scrobble more music to play or select a genre.");for(s=a.topartists.artist,n={},r=0,l=[];10>r;)i=s[r].name,i=i.split(" ").join("+"),o="http://ws.audioscrobbler.com/2.0/?method=artist.gettopalbums&artist="+i+"&api_key="+e+"&limit=8&format=json",t.getJSON(o,function(a){var e,i,o,s;for(e=a.topalbums["@attr"].artist,s=a.topalbums["@attr"].artist.split(" ").join("_").toLowerCase(),i=a.topalbums.album,n[e]=[],t("#image-datas").append('<div class="artists">'),o=0;o<a.topalbums.album.length;)n[e].push(s+o),t("#image-datas .artists:last").append('<img src="'+i[o].image[2]["#text"]+'" id="'+s+o+'" width="100px" height="100px" artist="'+e+'"/>'),o++;return c++,g(n)}),l.push(r++);return l})}}),String.prototype.format=function(){var t,a,e;for(t=this,a=0;a<arguments.length;)e=new RegExp("\\{"+a+"\\}","gi"),t=t.replace(e,arguments[a]),a++;return t},Array.prototype.move=function(t,a){this.splice(a,0,this.splice(t,1)[0])};